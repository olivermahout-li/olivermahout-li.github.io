<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†é¡µé¢ - å­¦æœ¯ä¸»é¡µç®¡ç†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* ç™»å½•é¡µé¢æ ·å¼ */
        #loginContainer {
            display: none;
            max-width: 400px;
            margin: 100px auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            padding: 40px;
            text-align: center;
        }

        #loginContainer h2 {
            color: #667eea;
            margin-bottom: 30px;
            font-size: 1.8em;
        }

        #loginContainer input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1em;
            margin-bottom: 20px;
            transition: border-color 0.3s;
        }

        #loginContainer input:focus {
            outline: none;
            border-color: #667eea;
        }

        #loginContainer button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        #loginContainer button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        #loginError {
            color: #dc3545;
            margin-top: 15px;
            font-size: 0.9em;
            display: none;
        }

        #mainContent {
            display: none;
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e0e0e0;
            overflow-x: auto;
        }

        .tab-button {
            padding: 15px 25px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-button:hover {
            background: #e9ecef;
        }

        .tab-button.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.95em;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-group small {
            display: block;
            margin-top: 5px;
            color: #999;
            font-size: 0.85em;
        }

        .form-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .form-row .form-group {
            flex: 1;
            min-width: 200px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #666;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.85em;
        }

        .item-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .item-card {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .item-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }

        .item-card-actions {
            display: flex;
            gap: 5px;
        }

        .top-nav {
            background: #f8f9fa;
            padding: 15px 30px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-link {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }

        .nav-link:hover {
            text-decoration: underline;
        }

        .conditional-fields {
            display: none;
        }

        .conditional-fields.show {
            display: flex;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab-content {
                padding: 15px;
            }

            .form-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- ç™»å½•ç•Œé¢ -->
    <div id="loginContainer">
        <h2>ğŸ” ç®¡ç†å‘˜ç™»å½•</h2>
        <p style="color: #666; margin-bottom: 20px;">è¯·è¾“å…¥å¯†ç ä»¥è®¿é—®ç®¡ç†é¡µé¢</p>
        <input type="password" id="passwordInput" placeholder="è¯·è¾“å…¥å¯†ç " onkeypress="handleKeyPress(event)">
        <button onclick="checkPassword()">ç™»å½•</button>
        <p id="loginError">å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•</p>
    </div>

    <!-- ä¸»å†…å®¹ -->
    <div id="mainContent">
        <div class="container">
            <header>
                <h1>å­¦æœ¯ä¸»é¡µç®¡ç†</h1>
                <p>Academic Homepage Management</p>
                <button class="logout-btn" onclick="logout()">ğŸšª ç™»å‡º</button>
            </header>

            <div class="top-nav">
                <a href="index.html" class="nav-link">â† è¿”å›å±•ç¤ºé¡µé¢</a>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                <button class="btn btn-success btn-small" onclick="exportToGitHub()">ğŸ“¦ å¯¼å‡ºåˆ°GitHub</button>
                <button class="btn btn-success btn-small" onclick="document.getElementById('fileInput').click()">ğŸ“¥ å¯¼å…¥å¤‡ä»½</button>
                <input type="file" id="fileInput" accept=".json" onchange="importData(event)" style="display: none;">
            </div>
        </div>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('basicInfo')">åŸºæœ¬ä¿¡æ¯</button>
            <button class="tab-button" onclick="switchTab('biography')">ä¸ªäººç®€å†</button>
            <button class="tab-button" onclick="switchTab('research')">ç ”ç©¶å…´è¶£</button>
            <button class="tab-button" onclick="switchTab('news')">æ–°é—»åŠ¨æ€</button>
            <button class="tab-button" onclick="switchTab('publications')">è®ºæ–‡å‘è¡¨</button>
            <button class="tab-button" onclick="switchTab('awards')">å¥–é¡¹è£èª‰</button>
            <button class="tab-button" onclick="switchTab('settings')">æ€»ä½“è®¾ç½®</button>
        </div>

        <!-- åŸºæœ¬ä¿¡æ¯ -->
        <div id="basicInfo" class="tab-content active">
            <h2>åŸºæœ¬ä¿¡æ¯</h2>
            <form id="basicInfoForm" onsubmit="saveBasicInfo(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label>ä¸­æ–‡å§“å *</label>
                        <input type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label>è‹±æ–‡å§“å *</label>
                        <input type="text" id="nameEn" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>èŒä½ *</label>
                        <input type="text" id="title" required>
                    </div>
                    <div class="form-group">
                        <label>æ‰€åœ¨æœºæ„ *</label>
                        <input type="text" id="institution" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>é‚®ç®± *</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>æ ¡å†…åŠå…¬å®¤ (SJTU)</label>
                        <input type="text" id="officeSJTU" placeholder="ä¾‹å¦‚: 3F AI Institute, 930 Jianchuan RD">
                    </div>
                    <div class="form-group">
                        <label>æ ¡å¤–åŠå…¬å®¤ (Hecaray)</label>
                        <input type="text" id="officeHecaray" placeholder="ä¾‹å¦‚: Hecaray Technology Office">
                    </div>
                </div>
                <div class="form-group">
                    <label>ç…§ç‰‡è·¯å¾„</label>
                    <input type="text" id="photo" placeholder="ä¾‹å¦‚: images/photo.jpg">
                </div>
                <h3 style="margin-top: 30px; margin-bottom: 15px;">å­¦æœ¯ä¸»é¡µé“¾æ¥</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>IEEE Homepage</label>
                        <input type="url" id="linkIeee">
                    </div>
                    <div class="form-group">
                        <label>Google Scholar</label>
                        <input type="url" id="linkScholar">
                    </div>
                    <div class="form-group">
                        <label>ResearchGate</label>
                        <input type="url" id="linkResearchgate">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">ä¿å­˜åŸºæœ¬ä¿¡æ¯</button>
            </form>
        </div>

        <!-- ä¸ªäººç®€å† -->
        <div id="biography" class="tab-content">
            <h2>ä¸ªäººç®€å†</h2>
            
            <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-bottom: 20px; border-radius: 6px;">
                <strong>ğŸ’¡ HTMLæ ¼å¼è¯´æ˜</strong>
                <p style="margin: 10px 0 5px 0; font-size: 0.9em;">å†…å®¹æ”¯æŒHTMLæ ‡è®°ï¼Œå¯å®ç°ä¸°å¯Œçš„æ ¼å¼ï¼š</p>
                <ul style="font-size: 0.9em; margin-left: 20px; line-height: 1.8;">
                    <li><strong>åŠ ç²—ï¼š</strong> &lt;strong&gt;æ–‡å­—&lt;/strong&gt;</li>
                    <li><strong>è¶…é“¾æ¥ï¼š</strong> &lt;a href="ç½‘å€"&gt;æ–‡å­—&lt;/a&gt;</li>
                    <li><strong>åŠ ç²—+è¶…é“¾æ¥ï¼š</strong> &lt;strong&gt;&lt;a href="ç½‘å€"&gt;æ–‡å­—&lt;/a&gt;&lt;/strong&gt;</li>
                </ul>
                <p style="margin: 10px 0 0 0; font-size: 0.85em; color: #856404;">
                    <strong>ç¤ºä¾‹ï¼š</strong> Join &lt;strong&gt;&lt;a href="https://hi-rfskl.szu.edu.cn/"&gt;Shanghai Jiao Tong University&lt;/a&gt;&lt;/strong&gt; as a Postdoctoral Research Fellow.
                </p>
            </div>
            
            <form id="bioForm" onsubmit="addBioItem(event)">
                <input type="hidden" id="bioEditId">
                <div class="form-group">
                    <label>æ—¶é—´ *</label>
                    <input type="text" id="bioDate" required placeholder="ä¾‹å¦‚: Jun. 2025 - Now">
                </div>
                <div class="form-group">
                    <label>å†…å®¹ *</label>
                    <textarea id="bioContent" required rows="4"></textarea>
                    <small>æ”¯æŒHTMLæ ‡è®°ï¼Œè¯¦è§ä¸Šæ–¹è¯´æ˜</small>
                </div>
                <button type="submit" class="btn btn-primary" id="bioSubmitBtn">æ·»åŠ é¡¹ç›®</button>
                <button type="button" class="btn btn-secondary" onclick="resetBioForm()">æ¸…ç©º</button>
            </form>
            <h3 style="margin-top: 30px; margin-bottom: 15px;">å·²æ·»åŠ çš„ç®€å†é¡¹</h3>
            <div class="item-list" id="bioList"></div>
        </div>

        <!-- ç ”ç©¶å…´è¶£ -->
        <div id="research" class="tab-content">
            <h2>ç ”ç©¶å…´è¶£</h2>
            
            <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-bottom: 20px; border-radius: 6px;">
                <strong>ğŸ’¡ HTMLæ ¼å¼è¯´æ˜</strong>
                <p style="margin: 10px 0 5px 0; font-size: 0.9em;">å†…å®¹æ”¯æŒHTMLæ ‡è®°ï¼Œå¯å®ç°ä¸°å¯Œçš„æ ¼å¼ï¼š</p>
                <ul style="font-size: 0.9em; margin-left: 20px; line-height: 1.8;">
                    <li><strong>åŠ ç²—ï¼š</strong> &lt;strong&gt;æ–‡å­—&lt;/strong&gt;</li>
                    <li><strong>è¶…é“¾æ¥ï¼š</strong> &lt;a href="ç½‘å€"&gt;æ–‡å­—&lt;/a&gt;</li>
                    <li><strong>åŠ ç²—+è¶…é“¾æ¥ï¼š</strong> &lt;strong&gt;&lt;a href="ç½‘å€"&gt;æ–‡å­—&lt;/a&gt;&lt;/strong&gt;</li>
                </ul>
            </div>
            
            <form id="researchForm" onsubmit="saveResearch(event)">
                <div class="form-group">
                    <label>ç ”ç©¶å…´è¶£æè¿° *</label>
                    <textarea id="researchText" required rows="6"></textarea>
                    <small>æ”¯æŒHTMLæ ‡è®°ï¼Œè¯¦è§ä¸Šæ–¹è¯´æ˜</small>
                </div>
                <button type="submit" class="btn btn-primary">ä¿å­˜ç ”ç©¶å…´è¶£</button>
            </form>
        </div>

        <!-- æ–°é—»åŠ¨æ€ -->
        <div id="news" class="tab-content">
            <h2>æ–°é—»åŠ¨æ€</h2>
            
            <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-bottom: 20px; border-radius: 6px;">
                <strong>ğŸ’¡ HTMLæ ¼å¼è¯´æ˜</strong>
                <p style="margin: 10px 0 5px 0; font-size: 0.9em;">å†…å®¹æ”¯æŒHTMLæ ‡è®°ï¼Œå¯å®ç°ä¸°å¯Œçš„æ ¼å¼ï¼š</p>
                <ul style="font-size: 0.9em; margin-left: 20px; line-height: 1.8;">
                    <li><strong>åŠ ç²—ï¼š</strong> &lt;strong&gt;æ–‡å­—&lt;/strong&gt;</li>
                    <li><strong>è¶…é“¾æ¥ï¼š</strong> &lt;a href="ç½‘å€"&gt;æ–‡å­—&lt;/a&gt;</li>
                    <li><strong>åŠ ç²—+è¶…é“¾æ¥ï¼š</strong> &lt;strong&gt;&lt;a href="ç½‘å€"&gt;æ–‡å­—&lt;/a&gt;&lt;/strong&gt;</li>
                </ul>
            </div>
            
            <form id="newsForm" onsubmit="addNewsItem(event)">
                <input type="hidden" id="newsEditId">
                <div class="form-row">
                    <div class="form-group">
                        <label>æ—¥æœŸ *</label>
                        <input type="text" id="newsDate" required placeholder="ä¾‹å¦‚: 2025-12">
                        <small>å»ºè®®æ ¼å¼: YYYY-MM æˆ– YYYY</small>
                    </div>
                </div>
                <div class="form-group">
                    <label>æ–°é—»å†…å®¹ *</label>
                    <textarea id="newsContent" required rows="4"></textarea>
                    <small>æ”¯æŒHTMLæ ‡è®°ï¼Œè¯¦è§ä¸Šæ–¹è¯´æ˜</small>
                </div>
                <div class="form-group">
                    <label>å›¾ç‰‡è·¯å¾„</label>
                    <input type="text" id="newsImage" placeholder="ä¾‹å¦‚: images/news/photo.jpg">
                    <small>å¯é€‰ã€‚å¦‚éœ€æ·»åŠ å›¾ç‰‡ï¼Œè¯·å¡«å†™å›¾ç‰‡çš„ç›¸å¯¹è·¯å¾„</small>
                </div>
                <button type="submit" class="btn btn-primary" id="newsSubmitBtn">æ·»åŠ æ–°é—»</button>
                <button type="button" class="btn btn-secondary" onclick="resetNewsForm()">æ¸…ç©º</button>
            </form>
            <h3 style="margin-top: 30px; margin-bottom: 15px;">å·²å‘å¸ƒçš„æ–°é—»</h3>
            <div class="item-list" id="newsList"></div>
        </div>

        <!-- è®ºæ–‡å‘è¡¨ -->
        <div id="publications" class="tab-content">
            <h2>è®ºæ–‡å‘è¡¨ç®¡ç†</h2>
            
            <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 20px; margin-bottom: 20px; border-radius: 6px;">
                <h3 style="color: #1976d2; margin-bottom: 10px;">ğŸ“š è®ºæ–‡ç®¡ç†</h3>
                <p style="margin-bottom: 15px;">è®ºæ–‡æ•°æ®å·²æ•´åˆåˆ°ä¸»æ•°æ®æ–‡ä»¶ä¸­ã€‚ä½¿ç”¨ä¸‹æ–¹æŒ‰é’®è¿›å…¥è¯¦ç»†çš„è®ºæ–‡ç®¡ç†ç•Œé¢ã€‚</p>
                <a href="pub_admin.html" style="display: inline-block; padding: 12px 24px; background: #2196f3; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; transition: all 0.3s;">
                    ğŸ”— æ‰“å¼€è®ºæ–‡ç®¡ç†é¡µé¢
                </a>
            </div>

            <div id="pubStats" style="margin-bottom: 20px;"></div>

            <h3 style="margin-top: 30px; margin-bottom: 15px;">æ˜¾ç¤ºè®¾ç½®</h3>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <p style="margin-bottom: 15px; color: #666;">æ§åˆ¶åœ¨å±•ç¤ºé¡µé¢ä¸­æ˜¾ç¤ºå“ªäº›ä¿¡æ¯ï¼š</p>
                <div class="form-group">
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="checkbox" id="showAuthorPosition" onchange="savePublicationSettings()" style="width: auto; margin-right: 10px;" checked>
                        æ˜¾ç¤ºä½œè€…é¡ºåºæ ‡ç­¾ï¼ˆç¬¬ä¸€ä½œè€…ã€ç¬¬äºŒä½œè€…ç­‰ï¼‰
                    </label>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="checkbox" id="showJournalLevel" onchange="savePublicationSettings()" style="width: auto; margin-right: 10px;" checked>
                        æ˜¾ç¤ºæœŸåˆŠç­‰çº§æ ‡ç­¾ï¼ˆä¸­ç§‘é™¢1åŒºTOPç­‰ï¼‰
                    </label>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="checkbox" id="showDOI" onchange="savePublicationSettings()" style="width: auto; margin-right: 10px;" checked>
                        æ˜¾ç¤ºDOIä¿¡æ¯
                    </label>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="checkbox" id="showURL" onchange="savePublicationSettings()" style="width: auto; margin-right: 10px;" checked>
                        æ˜¾ç¤ºé“¾æ¥æŒ‰é’®
                    </label>
                </div>
            </div>
        </div>

        <!-- å¥–é¡¹è£èª‰ -->
        <div id="awards" class="tab-content">
            <h2>å¥–é¡¹è£èª‰</h2>
            
            <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-bottom: 20px; border-radius: 6px;">
                <strong>ğŸ’¡ HTMLæ ¼å¼è¯´æ˜</strong>
                <p style="margin: 10px 0 5px 0; font-size: 0.9em;">å†…å®¹æ”¯æŒHTMLæ ‡è®°ï¼Œå¯å®ç°ä¸°å¯Œçš„æ ¼å¼ï¼š</p>
                <ul style="font-size: 0.9em; margin-left: 20px; line-height: 1.8;">
                    <li><strong>åŠ ç²—ï¼š</strong> &lt;strong&gt;æ–‡å­—&lt;/strong&gt;</li>
                    <li><strong>è¶…é“¾æ¥ï¼š</strong> &lt;a href="ç½‘å€"&gt;æ–‡å­—&lt;/a&gt;</li>
                    <li><strong>åŠ ç²—+è¶…é“¾æ¥ï¼š</strong> &lt;strong&gt;&lt;a href="ç½‘å€"&gt;æ–‡å­—&lt;/a&gt;&lt;/strong&gt;</li>
                </ul>
            </div>
            
            <form id="awardForm" onsubmit="addAwardItem(event)">
                <input type="hidden" id="awardEditId">
                <div class="form-row">
                    <div class="form-group">
                        <label>å¹´ä»½ *</label>
                        <input type="text" id="awardYear" required placeholder="ä¾‹å¦‚: 2025">
                    </div>
                </div>
                <div class="form-group">
                    <label>å¥–é¡¹å†…å®¹ *</label>
                    <textarea id="awardContent" required rows="4"></textarea>
                    <small>æ”¯æŒHTMLæ ‡è®°ï¼Œè¯¦è§ä¸Šæ–¹è¯´æ˜</small>
                </div>
                <button type="submit" class="btn btn-primary" id="awardSubmitBtn">æ·»åŠ å¥–é¡¹</button>
                <button type="button" class="btn btn-secondary" onclick="resetAwardForm()">æ¸…ç©º</button>
            </form>
            <h3 style="margin-top: 30px; margin-bottom: 15px;">å·²æ·»åŠ çš„å¥–é¡¹</h3>
            <div class="item-list" id="awardList"></div>
        </div>

        <!-- æ€»ä½“è®¾ç½® -->
        <div id="settings" class="tab-content">
            <h2>æ€»ä½“è®¾ç½®</h2>
            
            <h3 style="margin-bottom: 20px;">ç½‘ç«™åŸºæœ¬è®¾ç½®</h3>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
                <div class="form-group">
                    <label>ç½‘ç«™æ ‡é¢˜æ æ–‡å­—</label>
                    <input type="text" id="pageTitle" placeholder="ä¾‹å¦‚: æäºˆç› - Yuchen Li - Academic Homepage">
                    <small>æ˜¾ç¤ºåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µçš„æ ‡é¢˜</small>
                </div>
                
                <div class="form-group">
                    <label>æ ‡é¢˜æ å›¾æ ‡ (Favicon)</label>
                    <input type="text" id="faviconPath" placeholder="ä¾‹å¦‚: images/logo/logo-li.ico">
                    <small>æ˜¾ç¤ºåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µçš„å°å›¾æ ‡ï¼Œæ”¯æŒ .ico, .png æ ¼å¼</small>
                </div>
                
                <div class="form-group">
                    <label>Header ä¸»æ ‡é¢˜</label>
                    <input type="text" id="headerTitle" placeholder="ä¾‹å¦‚: æäºˆç›">
                    <small>æ˜¾ç¤ºåœ¨é¡µé¢é¡¶éƒ¨bannerä¸­çš„å¤§æ ‡é¢˜</small>
                </div>
                
                <button type="button" class="btn btn-primary" onclick="saveSiteSettings()">ä¿å­˜ç½‘ç«™è®¾ç½®</button>
            </div>
            
            <h3 style="margin-bottom: 20px;">é…è‰²æ–¹æ¡ˆ</h3>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
                <div class="form-group">
                    <label>ä¸»è‰²è°ƒ</label>
                    <div style="display: flex; gap: 15px; align-items: center;">
                        <input type="color" id="primaryColor" style="width: 60px; height: 40px; border: 1px solid #ddd; border-radius: 6px; cursor: pointer;">
                        <input type="text" id="primaryColorHex" placeholder="#AA060A" style="width: 120px;">
                        <button type="button" class="btn btn-secondary btn-small" onclick="resetPrimaryColor()">æ¢å¤é»˜è®¤</button>
                    </div>
                    <small>é€‰æ‹©ç½‘ç«™çš„ä¸»è‰²è°ƒï¼ˆç”¨äºå¯¼èˆªæ ã€æ ‡é¢˜ã€æŒ‰é’®ç­‰ï¼‰</small>
                </div>
                
                <h4 style="margin-top: 25px; margin-bottom: 15px;">é¢„è®¾é…è‰²</h4>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <button type="button" class="btn btn-secondary" onclick="applyPresetColor('#AA060A')" style="background: #AA060A; color: white;">æ·±çº¢è‰²</button>
                    <button type="button" class="btn btn-secondary" onclick="applyPresetColor('#950508')" style="background: #950508; color: white;">é…’çº¢è‰²</button>
                    <button type="button" class="btn btn-secondary" onclick="applyPresetColor('#667eea')" style="background: #667eea; color: white;">ç´«è‰²</button>
                    <button type="button" class="btn btn-secondary" onclick="applyPresetColor('#2790f3')" style="background: #2790f3; color: white;">è“è‰²</button>
                    <button type="button" class="btn btn-secondary" onclick="applyPresetColor('#27ae60')" style="background: #27ae60; color: white;">ç»¿è‰²</button>
                    <button type="button" class="btn btn-secondary" onclick="applyPresetColor('#e67e22')" style="background: #e67e22; color: white;">æ©™è‰²</button>
                </div>
                
                <button type="button" class="btn btn-primary" onclick="saveColorSettings()" style="margin-top: 20px;">ä¿å­˜é…è‰²è®¾ç½®</button>
            </div>
            
            <p style="color: #999; font-size: 0.9em;">ğŸ’¡ æç¤ºï¼šä¿®æ”¹è®¾ç½®åï¼Œè¯·åˆ·æ–°å±•ç¤ºé¡µé¢æŸ¥çœ‹æ•ˆæœ</p>
        </div>
        </div> <!-- å…³é—­ container -->
    </div> <!-- å…³é—­ mainContent -->

    <script>
        let siteData = {};

        // è®ºæ–‡æ˜¾ç¤ºè®¾ç½®
        function savePublicationSettings() {
            const settings = {
                showAuthorPosition: document.getElementById('showAuthorPosition').checked,
                showJournalLevel: document.getElementById('showJournalLevel').checked,
                showDOI: document.getElementById('showDOI').checked,
                showURL: document.getElementById('showURL').checked
            };
            localStorage.setItem('publicationSettings', JSON.stringify(settings));
        }

        function loadPublicationSettings() {
            const settings = JSON.parse(localStorage.getItem('publicationSettings') || '{}');
            document.getElementById('showAuthorPosition').checked = settings.showAuthorPosition !== false;
            document.getElementById('showJournalLevel').checked = settings.showJournalLevel !== false;
            document.getElementById('showDOI').checked = settings.showDOI !== false;
            document.getElementById('showURL').checked = settings.showURL !== false;
        }

        // ç½‘ç«™è®¾ç½®
        function loadSiteSettings() {
            const siteSettings = JSON.parse(localStorage.getItem('siteSettings') || '{}');
            document.getElementById('pageTitle').value = siteSettings.pageTitle || '';
            document.getElementById('faviconPath').value = siteSettings.favicon || '';
            document.getElementById('headerTitle').value = siteSettings.headerTitle || '';
        }

        function saveSiteSettings() {
            const siteSettings = {
                pageTitle: document.getElementById('pageTitle').value,
                favicon: document.getElementById('faviconPath').value,
                headerTitle: document.getElementById('headerTitle').value
            };
            localStorage.setItem('siteSettings', JSON.stringify(siteSettings));
            alert('ç½‘ç«™è®¾ç½®å·²ä¿å­˜ï¼è¯·åˆ·æ–°å±•ç¤ºé¡µé¢æŸ¥çœ‹æ•ˆæœã€‚');
        }

        // é…è‰²è®¾ç½®
        function loadColorSettings() {
            const colorSettings = JSON.parse(localStorage.getItem('colorSettings') || '{"primaryColor": "#AA060A"}');
            const colorInput = document.getElementById('primaryColor');
            const colorHex = document.getElementById('primaryColorHex');
            
            if (colorInput && colorHex) {
                colorInput.value = colorSettings.primaryColor;
                colorHex.value = colorSettings.primaryColor;
                
                // åŒæ­¥é¢œè‰²é€‰æ‹©å™¨å’Œæ–‡æœ¬æ¡†
                colorInput.addEventListener('input', (e) => {
                    colorHex.value = e.target.value;
                });
                
                colorHex.addEventListener('input', (e) => {
                    if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                        colorInput.value = e.target.value;
                    }
                });
            }
        }

        function applyPresetColor(color) {
            document.getElementById('primaryColor').value = color;
            document.getElementById('primaryColorHex').value = color;
        }

        function resetPrimaryColor() {
            applyPresetColor('#AA060A');
        }

        function saveColorSettings() {
            const primaryColor = document.getElementById('primaryColor').value;
            const colorSettings = {
                primaryColor: primaryColor
            };
            localStorage.setItem('colorSettings', JSON.stringify(colorSettings));
            alert('é…è‰²è®¾ç½®å·²ä¿å­˜ï¼è¯·åˆ·æ–°å±•ç¤ºé¡µé¢æŸ¥çœ‹æ•ˆæœã€‚');
        }

        // ==================== èº«ä»½éªŒè¯ç³»ç»Ÿï¼ˆå·²ç¦ç”¨ - æœ¬åœ°ä½¿ç”¨ï¼‰====================
        // 
        // æ³¨æ„ï¼šå› ä¸ºæ­¤ç®¡ç†é¡µé¢ä»…åœ¨æœ¬åœ°ä½¿ç”¨ï¼Œç™»å½•éªŒè¯å·²è¢«æ³¨é‡Šã€‚
        // å¦‚éœ€å¯ç”¨ï¼Œè¯·å–æ¶ˆä¸‹æ–¹ä»£ç çš„æ³¨é‡Šã€‚
        // 
        /*
        // è®¾ç½®å¯†ç ï¼ˆè¯·åœ¨æ­¤å¤„ä¿®æ”¹æ‚¨çš„å¯†ç ï¼‰
        const ADMIN_PASSWORD = 'hecaray123';  // ğŸ‘ˆ åœ¨æ­¤ä¿®æ”¹æ‚¨çš„å¯†ç 
        
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const isLoggedIn = sessionStorage.getItem('adminLoggedIn');
            if (isLoggedIn === 'true') {
                showMainContent();
            } else {
                showLoginPage();
            }
        }
        
        // æ˜¾ç¤ºç™»å½•é¡µé¢
        function showLoginPage() {
            document.getElementById('loginContainer').style.display = 'block';
            document.getElementById('mainContent').style.display = 'none';
        }
        
        // æ˜¾ç¤ºä¸»å†…å®¹
        function showMainContent() {
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
        }
        
        // éªŒè¯å¯†ç 
        function checkPassword() {
            const inputPassword = document.getElementById('passwordInput').value;
            const errorMsg = document.getElementById('loginError');
            
            if (inputPassword === ADMIN_PASSWORD) {
                sessionStorage.setItem('adminLoggedIn', 'true');
                showMainContent();
                errorMsg.style.display = 'none';
                document.getElementById('passwordInput').value = '';
            } else {
                errorMsg.style.display = 'block';
                document.getElementById('passwordInput').value = '';
                document.getElementById('passwordInput').focus();
            }
        }
        
        // ç™»å‡º
        function logout() {
            if (confirm('ç¡®å®šè¦ç™»å‡ºå—ï¼Ÿ')) {
                sessionStorage.removeItem('adminLoggedIn');
                showLoginPage();
            }
        }
        
        // å¤„ç†å›è½¦é”®ç™»å½•
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                checkPassword();
            }
        }
        */
        
        // ==================== åˆå§‹åŒ– ====================
        document.addEventListener('DOMContentLoaded', () => {
            // ç™»å½•éªŒè¯å·²ç¦ç”¨ï¼Œç›´æ¥æ˜¾ç¤ºä¸»å†…å®¹
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            
            // åŠ è½½æ•°æ®
            loadData();
            displayBioList();
            displayNewsList();
            displayAwardList();
            displayPubStats();
            loadPublicationSettings();
            loadColorSettings();
            loadSiteSettings();
        });

        // åŠ è½½æ•°æ®ï¼ˆä¼˜å…ˆlocalStorageï¼Œå¯ä»JSONå¯¼å…¥ï¼‰
        async function loadData() {
            // ä¼˜å…ˆä½¿ç”¨localStorageï¼ˆæœ¬åœ°ç¼–è¾‘ï¼‰
            const data = localStorage.getItem('academicSiteData');
            if (data) {
                siteData = JSON.parse(data);
                console.log('âœ… æ•°æ®å·²ä»localStorageåŠ è½½');
            } else {
                console.log('â„¹ï¸ localStorageä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤æ•°æ®');
                // ä½¿ç”¨é»˜è®¤ç©ºæ•°æ®
                siteData = {
                    basicInfo: {
                        name: '',
                        nameEn: '',
                        title: '',
                        institution: '',
                        email: '',
                        offices: {
                            sjtu: '',
                            hecaray: ''
                        },
                        photo: '',
                        links: { ieee: '', researchgate: '', scholar: '' }
                    },
                    biography: [],
                    research: '',
                    news: [],
                    awards: []
                };
            }
            loadBasicInfo();
            loadResearch();
        }

        // ä¿å­˜æ•°æ®åˆ° localStorage
        function saveData() {
            localStorage.setItem('academicSiteData', JSON.stringify(siteData));
            console.log('âœ… æ•°æ®å·²ä¿å­˜åˆ° localStorage');
        }

        // åŸºæœ¬ä¿¡æ¯
        function loadBasicInfo() {
            document.getElementById('name').value = siteData.basicInfo.name || '';
            document.getElementById('nameEn').value = siteData.basicInfo.nameEn || '';
            document.getElementById('title').value = siteData.basicInfo.title || '';
            document.getElementById('institution').value = siteData.basicInfo.institution || '';
            document.getElementById('email').value = siteData.basicInfo.email || '';
            
            // æ”¯æŒæ–°æ—§æ ¼å¼çš„åŠå…¬å®¤åœ°å€
            if (siteData.basicInfo.offices) {
                document.getElementById('officeSJTU').value = siteData.basicInfo.offices.sjtu || '';
                document.getElementById('officeHecaray').value = siteData.basicInfo.offices.hecaray || '';
            } else {
                // å‘åå…¼å®¹æ—§æ ¼å¼
                document.getElementById('officeSJTU').value = siteData.basicInfo.office || '';
                document.getElementById('officeHecaray').value = '';
            }
            
            document.getElementById('photo').value = siteData.basicInfo.photo || '';
            document.getElementById('linkIeee').value = siteData.basicInfo.links?.ieee || '';
            document.getElementById('linkScholar').value = siteData.basicInfo.links?.scholar || '';
            document.getElementById('linkResearchgate').value = siteData.basicInfo.links?.researchgate || '';
        }

        function saveBasicInfo(e) {
            e.preventDefault();
            siteData.basicInfo = {
                name: document.getElementById('name').value,
                nameEn: document.getElementById('nameEn').value,
                title: document.getElementById('title').value,
                institution: document.getElementById('institution').value,
                email: document.getElementById('email').value,
                offices: {
                    sjtu: document.getElementById('officeSJTU').value,
                    hecaray: document.getElementById('officeHecaray').value
                },
                photo: document.getElementById('photo').value,
                links: {
                    ieee: document.getElementById('linkIeee').value,
                    scholar: document.getElementById('linkScholar').value,
                    researchgate: document.getElementById('linkResearchgate').value
                }
            };
            saveData();
            alert('âœ… åŸºæœ¬ä¿¡æ¯å·²ä¿å­˜ï¼\n\nğŸ’¡ ç¼–è¾‘å®Œæˆåï¼Œè¯·ç‚¹å‡»å³ä¸Šè§’çš„"å¯¼å‡ºåˆ°GitHub"æŒ‰é’®å¯¼å‡ºæ–‡ä»¶ã€‚');
        }

        // ä¸ªäººç®€å†
        function displayBioList() {
            const list = document.getElementById('bioList');
            if (!siteData.biography || siteData.biography.length === 0) {
                list.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">æš‚æ— ç®€å†é¡¹</p>';
                return;
            }
            list.innerHTML = siteData.biography.map((item, index) => {
                // åˆ›å»ºä¸€ä¸ªä¸´æ—¶divæ¥æ¸²æŸ“HTMLï¼Œä»¥ä¾¿åœ¨ç®¡ç†é¡µé¢ä¸­æ˜¾ç¤ºæ¸²æŸ“åçš„æ•ˆæœ
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = item.content;
                const renderedText = tempDiv.textContent || tempDiv.innerText;
                const displayText = renderedText.length > 100 ? renderedText.substring(0, 100) + '...' : renderedText;
                
                return `
                <div class="item-card">
                    <div class="item-card-header">
                        <div style="flex: 1;">
                            <strong>åºå· #${index + 1}</strong> - ${item.date}
                            <p style="margin-top: 5px; color: #666;">${displayText}</p>
                        </div>
                        <div class="item-card-actions" style="display: flex; gap: 8px; align-items: center;">
                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                <button class="btn btn-secondary btn-small" onclick="moveBioItem(${index}, -1)" 
                                    ${index === 0 ? 'disabled style="opacity: 0.5; cursor: not-allowed;"' : ''} 
                                    title="ä¸Šç§»">â†‘</button>
                                <button class="btn btn-secondary btn-small" onclick="moveBioItem(${index}, 1)" 
                                    ${index === siteData.biography.length - 1 ? 'disabled style="opacity: 0.5; cursor: not-allowed;"' : ''} 
                                    title="ä¸‹ç§»">â†“</button>
                            </div>
                            <button class="btn btn-secondary btn-small" onclick="editBioItem(${index})">ç¼–è¾‘</button>
                            <button class="btn btn-danger btn-small" onclick="deleteBioItem(${index})">åˆ é™¤</button>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }

        function moveBioItem(index, direction) {
            const newIndex = index + direction;
            if (newIndex < 0 || newIndex >= siteData.biography.length) return;
            
            // äº¤æ¢ä½ç½®
            const temp = siteData.biography[index];
            siteData.biography[index] = siteData.biography[newIndex];
            siteData.biography[newIndex] = temp;
            
            saveData();
            displayBioList();
        }

        function addBioItem(e) {
            e.preventDefault();
            const editId = document.getElementById('bioEditId').value;
            const item = {
                date: document.getElementById('bioDate').value,
                content: document.getElementById('bioContent').value
            };

            if (editId !== '') {
                siteData.biography[parseInt(editId)] = item;
            } else {
                siteData.biography.unshift(item);  // æ·»åŠ åˆ°ç¬¬ä¸€æ¡
            }

            saveData();
            resetBioForm();
            displayBioList();
            alert(editId !== '' ? 'âœ… ç®€å†é¡¹å·²æ›´æ–°ï¼' : 'âœ… ç®€å†é¡¹å·²æ·»åŠ åˆ°ç¬¬ä¸€æ¡ï¼\n\nğŸ’¡ ä½¿ç”¨ â†‘â†“ æŒ‰é’®å¯ä»¥è°ƒæ•´æ˜¾ç¤ºé¡ºåºã€‚');
        }

        function editBioItem(index) {
            const item = siteData.biography[index];
            document.getElementById('bioEditId').value = index;
            document.getElementById('bioDate').value = item.date;
            document.getElementById('bioContent').value = item.content;
            document.getElementById('bioSubmitBtn').textContent = 'æ›´æ–°é¡¹ç›®';
        }

        function deleteBioItem(index) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç®€å†é¡¹å—ï¼Ÿ')) {
                siteData.biography.splice(index, 1);
                saveData();
                displayBioList();
            }
        }

        function resetBioForm() {
            document.getElementById('bioForm').reset();
            document.getElementById('bioEditId').value = '';
            document.getElementById('bioSubmitBtn').textContent = 'æ·»åŠ é¡¹ç›®';
        }

        // ç ”ç©¶å…´è¶£
        function loadResearch() {
            document.getElementById('researchText').value = siteData.research || '';
        }

        function saveResearch(e) {
            e.preventDefault();
            siteData.research = document.getElementById('researchText').value;
            saveData();
            alert('âœ… ç ”ç©¶å…´è¶£å·²ä¿å­˜ï¼\n\nğŸ’¡ ç¼–è¾‘å®Œæˆåï¼Œè¯·ç‚¹å‡»å³ä¸Šè§’çš„"å¯¼å‡ºåˆ°GitHub"æŒ‰é’®å¯¼å‡ºæ–‡ä»¶ã€‚');
        }

        // æ–°é—»åŠ¨æ€
        function displayNewsList() {
            const list = document.getElementById('newsList');
            if (!siteData.news || siteData.news.length === 0) {
                list.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">æš‚æ— æ–°é—»</p>';
                return;
            }
            list.innerHTML = siteData.news.map((item, index) => {
                // æ¸²æŸ“HTMLä»¥æ˜¾ç¤ºçº¯æ–‡æœ¬é¢„è§ˆ
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = item.content;
                const renderedText = tempDiv.textContent || tempDiv.innerText;
                const displayText = renderedText.length > 100 ? renderedText.substring(0, 100) + '...' : renderedText;
                
                return `
                <div class="item-card">
                    <div class="item-card-header">
                        <div style="flex: 1;">
                            <strong>åºå· #${index + 1}</strong> - ${item.date || 'Recent'}
                            <p style="margin-top: 5px; color: #666;">${displayText}</p>
                            ${item.image ? `<p style="color: #999; font-size: 0.9em; margin-top: 5px;">ğŸ“· å›¾ç‰‡: ${item.image}</p>` : ''}
                        </div>
                        <div class="item-card-actions" style="display: flex; gap: 8px; align-items: center;">
                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                <button class="btn btn-secondary btn-small" onclick="moveNewsItem(${index}, -1)" 
                                    ${index === 0 ? 'disabled style="opacity: 0.5; cursor: not-allowed;"' : ''} 
                                    title="ä¸Šç§»">â†‘</button>
                                <button class="btn btn-secondary btn-small" onclick="moveNewsItem(${index}, 1)" 
                                    ${index === siteData.news.length - 1 ? 'disabled style="opacity: 0.5; cursor: not-allowed;"' : ''} 
                                    title="ä¸‹ç§»">â†“</button>
                            </div>
                            <button class="btn btn-secondary btn-small" onclick="editNewsItem(${index})">ç¼–è¾‘</button>
                            <button class="btn btn-danger btn-small" onclick="deleteNewsItem(${index})">åˆ é™¤</button>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }

        function moveNewsItem(index, direction) {
            const newIndex = index + direction;
            if (newIndex < 0 || newIndex >= siteData.news.length) return;
            
            // äº¤æ¢ä½ç½®
            const temp = siteData.news[index];
            siteData.news[index] = siteData.news[newIndex];
            siteData.news[newIndex] = temp;
            
            saveData();
            displayNewsList();
        }

        function addNewsItem(e) {
            e.preventDefault();
            const editId = document.getElementById('newsEditId').value;
            const item = {
                date: document.getElementById('newsDate').value,
                content: document.getElementById('newsContent').value,
                image: document.getElementById('newsImage').value || undefined
            };

            if (editId !== '') {
                siteData.news[parseInt(editId)] = item;
            } else {
                siteData.news.unshift(item);  // æ·»åŠ åˆ°ç¬¬ä¸€æ¡
            }

            saveData();
            resetNewsForm();
            displayNewsList();
            alert(editId !== '' ? 'âœ… æ–°é—»å·²æ›´æ–°ï¼' : 'âœ… æ–°é—»å·²æ·»åŠ åˆ°ç¬¬ä¸€æ¡ï¼\n\nğŸ’¡ ä½¿ç”¨ â†‘â†“ æŒ‰é’®å¯ä»¥è°ƒæ•´æ˜¾ç¤ºé¡ºåºã€‚');
        }

        function editNewsItem(index) {
            const item = siteData.news[index];
            document.getElementById('newsEditId').value = index;
            document.getElementById('newsDate').value = item.date || '';
            document.getElementById('newsContent').value = item.content;
            document.getElementById('newsImage').value = item.image || '';
            document.getElementById('newsSubmitBtn').textContent = 'æ›´æ–°æ–°é—»';
        }

        function deleteNewsItem(index) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡æ–°é—»å—ï¼Ÿ')) {
                siteData.news.splice(index, 1);
                saveData();
                displayNewsList();
            }
        }

        function resetNewsForm() {
            document.getElementById('newsForm').reset();
            document.getElementById('newsEditId').value = '';
            document.getElementById('newsSubmitBtn').textContent = 'æ·»åŠ æ–°é—»';
        }

        // å¥–é¡¹è£èª‰
        function displayAwardList() {
            const list = document.getElementById('awardList');
            if (!siteData.awards || siteData.awards.length === 0) {
                list.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">æš‚æ— å¥–é¡¹</p>';
                return;
            }
            list.innerHTML = siteData.awards.map((item, index) => {
                // æ¸²æŸ“HTMLä»¥æ˜¾ç¤ºçº¯æ–‡æœ¬é¢„è§ˆ
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = item.content;
                const renderedText = tempDiv.textContent || tempDiv.innerText;
                const displayText = renderedText.length > 100 ? renderedText.substring(0, 100) + '...' : renderedText;
                
                return `
                <div class="item-card">
                    <div class="item-card-header">
                        <div style="flex: 1;">
                            <strong>åºå· #${index + 1}</strong> - ${item.year}
                            <p style="margin-top: 5px; color: #666;">${displayText}</p>
                        </div>
                        <div class="item-card-actions" style="display: flex; gap: 8px; align-items: center;">
                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                <button class="btn btn-secondary btn-small" onclick="moveAwardItem(${index}, -1)" 
                                    ${index === 0 ? 'disabled style="opacity: 0.5; cursor: not-allowed;"' : ''} 
                                    title="ä¸Šç§»">â†‘</button>
                                <button class="btn btn-secondary btn-small" onclick="moveAwardItem(${index}, 1)" 
                                    ${index === siteData.awards.length - 1 ? 'disabled style="opacity: 0.5; cursor: not-allowed;"' : ''} 
                                    title="ä¸‹ç§»">â†“</button>
                            </div>
                            <button class="btn btn-secondary btn-small" onclick="editAwardItem(${index})">ç¼–è¾‘</button>
                            <button class="btn btn-danger btn-small" onclick="deleteAwardItem(${index})">åˆ é™¤</button>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }

        function moveAwardItem(index, direction) {
            const newIndex = index + direction;
            if (newIndex < 0 || newIndex >= siteData.awards.length) return;
            
            // äº¤æ¢ä½ç½®
            const temp = siteData.awards[index];
            siteData.awards[index] = siteData.awards[newIndex];
            siteData.awards[newIndex] = temp;
            
            saveData();
            displayAwardList();
        }

        function addAwardItem(e) {
            e.preventDefault();
            const editId = document.getElementById('awardEditId').value;
            const item = {
                year: document.getElementById('awardYear').value,
                content: document.getElementById('awardContent').value
            };

            if (editId !== '') {
                siteData.awards[parseInt(editId)] = item;
            } else {
                siteData.awards.unshift(item);  // æ·»åŠ åˆ°ç¬¬ä¸€æ¡
            }

            saveData();
            resetAwardForm();
            displayAwardList();
            alert(editId !== '' ? 'âœ… å¥–é¡¹å·²æ›´æ–°ï¼' : 'âœ… å¥–é¡¹å·²æ·»åŠ åˆ°ç¬¬ä¸€æ¡ï¼\n\nğŸ’¡ ä½¿ç”¨ â†‘â†“ æŒ‰é’®å¯ä»¥è°ƒæ•´æ˜¾ç¤ºé¡ºåºã€‚');
        }

        function editAwardItem(index) {
            const item = siteData.awards[index];
            document.getElementById('awardEditId').value = index;
            document.getElementById('awardYear').value = item.year;
            document.getElementById('awardContent').value = item.content;
            document.getElementById('awardSubmitBtn').textContent = 'æ›´æ–°å¥–é¡¹';
        }

        function deleteAwardItem(index) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¥–é¡¹å—ï¼Ÿ')) {
                siteData.awards.splice(index, 1);
                saveData();
                displayAwardList();
            }
        }

        function resetAwardForm() {
            document.getElementById('awardForm').reset();
            document.getElementById('awardEditId').value = '';
            document.getElementById('awardSubmitBtn').textContent = 'æ·»åŠ å¥–é¡¹';
        }

        // è®ºæ–‡ç»Ÿè®¡
        function displayPubStats() {
            const publications = JSON.parse(localStorage.getItem('publications') || '[]');
            const stats = {
                total: publications.length,
                journal: publications.filter(p => p.type === 'journal').length,
                conference: publications.filter(p => p.type === 'conference').length,
                book: publications.filter(p => p.type === 'book').length,
                patent: publications.filter(p => p.type === 'patent').length
            };

            document.getElementById('pubStats').innerHTML = `
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <h3 style="margin-bottom: 15px;">è®ºæ–‡ç»Ÿè®¡</h3>
                    <p><strong>æ€»è®¡:</strong> ${stats.total} ç¯‡</p>
                    <p><strong>æœŸåˆŠè®ºæ–‡:</strong> ${stats.journal} ç¯‡</p>
                    <p><strong>ä¼šè®®è®ºæ–‡:</strong> ${stats.conference} ç¯‡</p>
                    <p><strong>ä¹¦ç±ç« èŠ‚:</strong> ${stats.book} ç¯‡</p>
                    <p><strong>ä¸“åˆ©:</strong> ${stats.patent} é¡¹</p>
                </div>
            `;
        }

        // Tabåˆ‡æ¢
        function switchTab(tabName) {
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');

            if (tabName === 'publications') {
                displayPubStats();
            }
        }

        // å¯¼å‡ºåˆ° GitHubï¼ˆå¯¼å‡ºæ•´åˆçš„ siteData.jsonï¼‰
        function exportToGitHub() {
            // æ•´åˆæ‰€æœ‰æ•°æ®åˆ° siteData
            const publications = JSON.parse(localStorage.getItem('publications') || '[]');
            const publicationSettings = JSON.parse(localStorage.getItem('publicationSettings') || '{}');
            const siteSettings = JSON.parse(localStorage.getItem('siteSettings') || '{}');
            const colorSettings = JSON.parse(localStorage.getItem('colorSettings') || '{}');
            
            const completeData = {
                ...siteData,
                publications: publications,
                settings: {
                    publication: publicationSettings,
                    site: siteSettings,
                    color: colorSettings
                }
            };
            
            // å¯¼å‡º siteData.json
            const dataStr = JSON.stringify(completeData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'siteData.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('âœ… æ•°æ®å¯¼å‡ºæˆåŠŸï¼\n\nå·²ä¸‹è½½: siteData.json\n\næ­¤æ–‡ä»¶åŒ…å«:\n- ä¸»é¡µæ•°æ®\n- è®ºæ–‡æ•°æ®\n- æ‰€æœ‰è®¾ç½®\n\nè¯·å°†æ­¤æ–‡ä»¶æ”¾åˆ°ä½ çš„ data/ æ–‡ä»¶å¤¹ä¸­ï¼Œ\nç„¶åæ¨é€åˆ° GitHub ä»“åº“å³å¯æ›´æ–°ç½‘ç«™ã€‚');
        }

        // å¯¼å…¥æ•°æ®ï¼ˆæ”¯æŒæ–°æ—§æ ¼å¼ï¼‰
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    
                    if (confirm('ç¡®å®šè¦å¯¼å…¥æ•°æ®å—ï¼Ÿè¿™å°†è¦†ç›–ç°æœ‰æ‰€æœ‰æ•°æ®å’Œè®¾ç½®ã€‚')) {
                        // æ£€æµ‹æ•°æ®æ ¼å¼
                        if (imported.basicInfo) {
                            // æ–°æ ¼å¼ï¼šæ•´åˆçš„ siteData
                            const { publications, settings, ...mainData } = imported;
                            
                            // ä¿å­˜ä¸»æ•°æ®
                            siteData = mainData;
                            localStorage.setItem('academicSiteData', JSON.stringify(siteData));
                            
                            // ä¿å­˜è®ºæ–‡æ•°æ®
                            if (publications) {
                                localStorage.setItem('publications', JSON.stringify(publications));
                            }
                            
                            // ä¿å­˜è®¾ç½®
                            if (settings) {
                                if (settings.publication) {
                                    localStorage.setItem('publicationSettings', JSON.stringify(settings.publication));
                                }
                                if (settings.site) {
                                    localStorage.setItem('siteSettings', JSON.stringify(settings.site));
                                }
                                if (settings.color) {
                                    localStorage.setItem('colorSettings', JSON.stringify(settings.color));
                                }
                            }
                        } else {
                            // æ—§æ ¼å¼ï¼šåˆ†ç¦»çš„æ•°æ®ï¼ˆå‘åå…¼å®¹ï¼‰
                            if (imported.siteData) {
                                siteData = imported.siteData;
                                localStorage.setItem('academicSiteData', JSON.stringify(siteData));
                            }
                            if (imported.publications) {
                                localStorage.setItem('publications', JSON.stringify(imported.publications));
                            }
                            if (imported.publicationSettings) {
                                localStorage.setItem('publicationSettings', JSON.stringify(imported.publicationSettings));
                            }
                            if (imported.siteSettings) {
                                localStorage.setItem('siteSettings', JSON.stringify(imported.siteSettings));
                            }
                            if (imported.colorSettings) {
                                localStorage.setItem('colorSettings', JSON.stringify(imported.colorSettings));
                            }
                        }
                        
                        // é‡æ–°åŠ è½½æ‰€æœ‰æ•°æ®å’Œè®¾ç½®
                        loadData();
                        displayBioList();
                        displayNewsList();
                        displayAwardList();
                        displayPubStats();
                        loadPublicationSettings();
                        loadColorSettings();
                        loadSiteSettings();
                        
                        alert('âœ… æ•°æ®å¯¼å…¥æˆåŠŸï¼\n\nå·²æ¢å¤æ‰€æœ‰æ•°æ®å’Œè®¾ç½®ã€‚');
                    }
                } catch (error) {
                    alert('âŒ å¯¼å…¥å¤±è´¥ï¼š' + error.message);
                }
            };
            reader.readAsText(file);
            event.target.value = '';
        }
    </script>
</body>
</html>

